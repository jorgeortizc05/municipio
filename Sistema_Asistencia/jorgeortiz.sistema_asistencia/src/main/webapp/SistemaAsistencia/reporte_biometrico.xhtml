<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:uti="http://java.sun.com/jsf/composite/util"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<!-- 
Autor: ING. JORGE LUIS ORTIZ CACERES
Fecha de Creacion:27/02/2019
Notas: Vista para el codigo de barras
Modificaciones
Fecha Modificacion
Notas:
-->
<ui:composition
	template="/WEB-INF/facelets/templates/plantillaGeneral.xhtml">

	<ui:define name="cuerpo">
		<p:panel header="Relojes Biométricos" style="margin-bottom:20px" id="fReporteBiometrico">
		<p:panel>
		<p:panelGrid columns="2">
			<p:panel id="pn1">
					<p:outputLabel for="cod_bio" value="Elija a la persona a consultar" />
					<!-- <p:inputText id="cod_bio" value="#{paramReportController.biometrico}" /> -->
	
					<p:selectOneListbox value="#{paramReportController.biometrico}"
						id="cod_bio" style="width:550px" filter="true"
						filterMatchMode="contains" scrollHeight="100" required="true"
						requiredMessage="Debe eligir un empleado">
						<f:selectItems value="#{paramReportController.empleados}" var="e"
							itemLabel="#{e.APELLIDO} #{e.NOMBRE}"
							itemValue="#{e.CODIGO_EMPLEADO}" />
					</p:selectOneListbox>
				<h:panelGrid columns="3">
					<p:outputLabel for="cod_fecha1" value="Fecha desde:" />
					<p:calendar id="cod_fecha1" value="#{paramReportController.fecha1}"
						pattern="dd-MM-yyyy" mask="true" />
					<p:inputMask id="tiempo1" value="#{paramReportController.tiempo1}"
						mask="99.99" placeholder="Desde que hora..." />
					<p:outputLabel for="cod_fecha2" value="Fecha hasta:" />
					<p:calendar id="cod_fecha2" value="#{paramReportController.fecha2}"
						pattern="dd-MM-yyyy" mask="true" />
					<p:inputMask id="tiempo2" value="#{paramReportController.tiempo2}"
						mask="99.99" placeholder="Hasta que hora..." />
				</h:panelGrid>
				<p:commandButton value="Enviar"
					actionListener="#{paramReportController.checkBiometrico}"
					styleClass="ui-priority-primary"
					update="mensajes pn1 png1 pn2 png2 png3" />
				<p:outputLabel id="salida1"
					value="#{paramReportController.timbres.size()} registros encontrados!!" />
	
			</p:panel>
			
			<p:panel id="pn2" header="Datos Personales">
				<p:panelGrid columns="2">
					<p:graphicImage value="#{paramReportController.myImage}"
						alt="sin imagen" id="pic1" style="width:200px;width:200px"
						cache="false">
					</p:graphicImage>
					<div class="grid-example col s12">
						<span style="color: black; font-size: 200%">#{paramReportController.nombre_pdf}
							- #{paramReportController.nom_dept}</span>
					</div>
				</p:panelGrid>
			</p:panel>
		
		</p:panelGrid>

		<p:panelGrid id="png1" columns="1">
			<p:dataTable id="tbl" var="tim"
				value="#{paramReportController.timbres}"
				paginatorTemplate="{CurrentPageReport} {PageLinks}"
				paginatorPosition="top" paginator="true" rows="20"
				style="margin-bottom:30px" class="responsive-table">
				<f:facet name="header">
				 	#{paramReportController.nombre_pdf} - #{paramReportController.nom_dept}
				 </f:facet>
				<p:column headerText="Biometrico">
					<h:outputText value="#{tim.CODIGO_EMPLEADO}" />
				</p:column>
				<p:column headerText="Departamento" exportable="false">
					<h:outputText value="#{paramReportController.nom_dept}" />
				</p:column>
				<p:column headerText="Nro_reloj">
					<h:outputText value="#{tim.CODIGO_RELOJ}" />
				</p:column>
				<p:column headerText="Fecha">
					<h:outputText
						value="#{paramReportController.checkTiempo(tim.FECHA)}" />
				</p:column>
				<p:column headerText="Hora">
					<h:outputText
						value="#{tim.FECHA_HORA_TIMBRE.hours}:#{tim.FECHA_HORA_TIMBRE.minutes}:#{tim.FECHA_HORA_TIMBRE.seconds}" />
				</p:column>
			</p:dataTable>
		</p:panelGrid>
		<h:commandLink id="excel1">
			<p:graphicImage url="/resources/images/excel.png"/>
			<p:dataExporter type="xlsx" target="tbl"
				fileName="reporteTimbrePersona"
				postProcessor="#{paramReportController.postProcessXLS}" />
		</h:commandLink>

		<h:commandLink id="pdf1">
			<p:graphicImage url="/resources/images/pdf.png" />
			<p:dataExporter type="pdf" target="tbl"
				fileName="reporteTimbrePersona"
				preProcessor="#{paramReportController.preProcessPDF}" />
		</h:commandLink>
		</p:panel>
		<p:separator style="height:400"/>
	
		<!--<p:commandButton  value="Actualizar " update=":f1:png2"/> -->
		<p:panel header="Justificaciones">
		<p:panelGrid id="png2" columns="1">
			<p:dataTable id="tbl1" var="just"
				value="#{paramReportController.justificaciones}"
				paginatorPosition="top" paginator="true" rows="20"
				style="margin-bottom:30px" class="responsive-table">
				<p:column headerText="Fecha">
					<h:outputText
						value="#{paramReportController.checkTiempo(just.FECHA)}" />
				</p:column>
				<p:column headerText="Mañana Entrada">
					<h:outputText value="#{just.MANENT}" />
				</p:column>
				<p:column headerText="Mañana Salida">
					<h:outputText value="#{just.MANSAL}" />
				</p:column>
				<p:column headerText="Tarde Entrada">
					<h:outputText value="#{just.TARENT}" />
				</p:column>
				<p:column headerText="Tarde Salida">
					<h:outputText value="#{just.TARSAL}" />
				</p:column>
				<p:column headerText="Descripción">
					<h:outputText value="#{just.OBSERVACIONES}" />
				</p:column>
			</p:dataTable>
			
		</p:panelGrid>
		</p:panel>
		
		<p:panel header="Acciones del Personal">
		<p:panelGrid id="png3" columns="1">
			
			<p:dataTable id="tbl2" var="acc"
				value="#{paramReportController.acciones}"
				paginatorPosition="top" paginator="true" rows="20"
				style="margin-bottom:30px" class="responsive-table">
				<p:column headerText="Servidor_Id">
					<h:outputText value="#{acc.SER_CODIGO}" />
				</p:column>
				<p:column headerText="Nombres">
					<h:outputText
						value="#{paramReportController.checkNombresYapellidosServidor(acc.SER_CODIGO)}" />
				</p:column>
				<p:column headerText="Motivo Permiso">
					<h:outputText value="#{paramReportController.checkMotivoPermiso()}" />
				</p:column>
				<p:column headerText="Cargo">
					<h:outputText
						value="#{paramReportController.checkCargo(acc.SER_CODIGO)}" />
				</p:column>
				<p:column headerText="Fecha Vigencia">
					<h:outputText
						value="#{paramReportController.checkTiempo(acc.FECHA_VIGENCIA)}" />
				</p:column>
				<p:column headerText="Explicación">
					<h:outputText value="#{acc.EXPLICACION}" />
				</p:column>
			</p:dataTable>
			
		</p:panelGrid>
		</p:panel>
	</p:panel>
	</ui:define>



</ui:composition>
</html>